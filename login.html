<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>RunCall – Connexion</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />

  <style>
    :root{
      --bg:#0b1020;
      --card:#0f172a;
      --border:rgba(148,163,184,.22);
      --text:#e2e8f0;
      --muted:#94a3b8;
      --brand:#1677ff;
      --shadow: 0 22px 80px rgba(0,0,0,.35);
      --radius:22px;
    }
    body{
      margin:0;
      min-height:100vh;
      background:
        radial-gradient(900px 420px at 20% 10%, rgba(22,119,255,.20), transparent 60%),
        radial-gradient(700px 420px at 80% 20%, rgba(99,102,241,.16), transparent 55%),
        var(--bg);
      display:grid;
      place-items:center;
      font-family: ui-sans-serif, system-ui, -apple-system, "SF Pro Text", Inter, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
    }
    .wrap{
      width:min(520px, 92vw);
      padding: 28px;
      box-sizing:border-box;
    }
    .brand{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-bottom: 16px;
    }
    .logo{
      font-weight: 950;
      letter-spacing:-.03em;
      font-size: 1.1rem;
      opacity:.95;
    }
    .lang{
      display:flex; gap:8px;
    }
    .lang button{
      border:1px solid var(--border);
      background: rgba(255,255,255,.04);
      color: var(--muted);
      padding: 10px 10px;
      border-radius: 14px;
      cursor:pointer;
      font-weight: 900;
      line-height:1;
    }
    .lang button.active{
      color: var(--text);
      border-color: rgba(22,119,255,.55);
      background: rgba(22,119,255,.14);
    }

    .card{
      background: rgba(15,23,42,.86);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      backdrop-filter: blur(10px);
    }
    .head{
      padding: 18px 18px 14px;
      border-bottom: 1px solid rgba(148,163,184,.16);
      background: radial-gradient(900px 320px at 18% 0%, rgba(22,119,255,.18), transparent 60%);
    }
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,.18);
      background: rgba(255,255,255,.04);
      color: var(--muted);
      font-weight: 800;
      font-size: .92rem;
    }
    .dot{ width:8px; height:8px; border-radius:999px; background: var(--brand); }
    h1{
      margin: 12px 0 0;
      font-size: 2rem;
      letter-spacing:-.03em;
      line-height:1.1;
    }

    .body{
      padding: 18px;
      display:flex;
      flex-direction:column;
      gap:12px;
    }

    .btn{
      width:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      padding: 14px 14px;
      border-radius: 16px;
      border: 1px solid rgba(148,163,184,.22);
      background: rgba(255,255,255,.06);
      color: var(--text);
      cursor:pointer;
      font-weight: 900;
      letter-spacing:-.01em;
      transition: transform 140ms ease, border-color 160ms ease, background-color 160ms ease;
      text-decoration:none;
      box-sizing:border-box;
    }
    .btn:hover{
      transform: translateY(-1px);
      border-color: rgba(22,119,255,.55);
      background: rgba(22,119,255,.14);
    }
    .btn.primary{
      border-color: rgba(22,119,255,.70);
      background: rgba(22,119,255,.20);
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="brand">
      <div class="logo">RunCall</div>
      <div class="lang">
        <button type="button" data-lang="fr">FR</button>
        <button type="button" data-lang="en">EN</button>
      </div>
    </div>

    <div class="card">
      <div class="head">
        <div class="badge">
          <span class="dot"></span>
          <span data-fr="Connexion" data-en="Login">Connexion</span>
        </div>

        <h1 data-fr="Se connecter à RunCall" data-en="Log in to RunCall">Se connecter à RunCall</h1>
      </div>

      <div class="body">
        <!-- ✅ IMPORTANT: use /api/google/login (no expert_id required) -->
        <a class="btn primary" id="googleBtn" href="/api/google/login">
          <span style="font-weight:1000;">G</span>
          <span data-fr="Continuer avec Google" data-en="Continue with Google">Continuer avec Google</span>
        </a>

        <!-- If already have an expert id (stored), show a direct shortcut -->
        <a class="btn" id="continueBtn" href="/dashboard.html" style="display:none;">
          <span data-fr="Continuer vers mon dashboard" data-en="Continue to my dashboard">Continuer vers mon dashboard</span>
          <span aria-hidden="true">↗</span>
        </a>
      </div>
    </div>
  </div>

<script>
(function(){
  // Language
  let lang = localStorage.getItem('runcall_lang');
  if (!lang) {
    const bl = (navigator.language || "").toLowerCase();
    lang = bl.startsWith('fr') ? 'fr' : 'en';
  }
  function applyLanguage(next){
    lang = next;
    document.documentElement.lang = lang;
    document.querySelectorAll('[data-fr][data-en]').forEach(el => el.textContent = el.dataset[lang]);
    document.querySelectorAll('.lang button').forEach(b => b.classList.toggle('active', b.dataset.lang === lang));
    localStorage.setItem('runcall_lang', lang);
  }
  document.querySelectorAll('.lang button').forEach(b => b.addEventListener('click', () => applyLanguage(b.dataset.lang)));
  applyLanguage(lang);

  // If already have an expert id, show "Continue"
  const expertId = localStorage.getItem("runcall_expert_id");
  const continueBtn = document.getElementById("continueBtn");
  const token = localStorage.getItem("runcall_token");
if (token) {
  continueBtn.style.display = "flex";
  continueBtn.href = `/dashboard.html`;
}

})();
</script>
</body>
</html>
